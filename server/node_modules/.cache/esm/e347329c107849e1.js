let express,mongoose,PORT,DB_URL,errorHandler,path,routes;_107‍.w("express",[["default",["express"],function(v){express=v}]]);_107‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);_107‍.w("./config",[["PORT",["PORT"],function(v){PORT=v}],["DB_URL",["DB_URL"],function(v){DB_URL=v}]]);_107‍.w("./middlewares/errorHandler",[["default",["errorHandler"],function(v){errorHandler=v}]]);_107‍.w("path",[["default",["path"],function(v){path=v}]]);_107‍.w("./routes",[["default",["routes"],function(v){routes=v}]]);





const app=express();





//Database Connection
mongoose.connect(DB_URL,{useNewUrlParser:true, useUnifiedTopology:true, useFindAndModify:false});
const db=mongoose.connection;
db.on('error',_107‍.g.console.error.bind(_107‍.g.console,'connection error:'));
db.once('open',()=>{
    console.log('DB connected...');
});
//

global.appRoot = path.resolve(__dirname);
app.use(express.urlencoded({extended:false}));

app.use(express.json());
app.use('/api',routes);



app.use(errorHandler);

app.listen(PORT,()=>{
    console.log(`Backend listening on port ${PORT}`);
});